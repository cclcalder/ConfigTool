using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Exceedra.Secure.Gate
{
    //public class GateKeeper
    //{
    //    private bool _valid;
    //    public GateWayData Current { get; set; }

    //    public string LoadGateKeeper(Person p)
    //    {
    //        //take username/pasword and call local repo to work out what auth service is neeeded
    //        // in prod we need to call a DB at some stage 
    //        var gwr = GatewayRepo.DataSet.SingleOrDefault(t => t.UserName == p.Username);

    //        // call the correct auth service
    //        if (gwr != null)
    //        {
    //            if (p.Token != "" && gwr.Token == p.Token) // the user has been set their account as auto login, so bypass security
    //            {
    //                _valid = true;
    //                gwr.Message = "login by session token & username";
    //                Current = gwr;

    //                return gwr.Token;
    //            }
    //            else
    //            {

    //                switch (gwr.Authservice)
    //                {
    //                    case "SP_DB":
    //                        _valid = true;
    //                        break;

    //                    case "AzureADF":
    //                        _valid = true;
    //                        break;

    //                    default:
    //                        _valid = false;
    //                        break;
    //                }
    //                gwr.Message = "login using: " + gwr.Authservice;// + " & username & password";
    //            }

    //            if (_valid)
    //            {
    //                //get the connection string and set the token in the repo
    //                gwr.Token = Guid.NewGuid().ToString();
    //                Current = gwr;
    //            }
    //            else
    //            {
    //                Current = new GateWayData() { Authservice = "", Connection = "", Token = "", UserName = "" };
    //            }

    //        }
    //        return "";
    //    }




    //}
}
